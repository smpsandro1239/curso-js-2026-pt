<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso JavaScript 2026 - Aula 24: Async / Await</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <style>
        .code-comparison {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        .code-block {
            flex: 1;
            background: #222;
            padding: 15px;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        .code-title {
            color: #888;
            margin-bottom: 10px;
            font-weight: bold;
            text-transform: uppercase;
        }
        #pokedex {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .pokemon-card {
            background: #333;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid transparent;
            transition: transform 0.2s;
            cursor: pointer;
        }
        .pokemon-card:hover {
            transform: scale(1.05);
            border-color: #ffd700;
        }
        .pokemon-card img {
            width: 100px;
            height: 100px;
        }
        .pokemon-card h4 {
            text-transform: capitalize;
            margin: 5px 0 0 0;
        }
        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        input {
            padding: 10px;
            border-radius: 5px;
            border: none;
            width: 200px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="course-info">
                    <h1>Curso Completo de JavaScript - 2026</h1>
                    <p>M√≥dulo 6: Assincronismo e APIs</p>
                </div>
                <div class="timer">
                    <h3>Dura√ß√£o da Aula</h3>
                    <div class="time-display" id="clock">60:00</div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="content-grid">
            <div class="main-content">
                <div class="section">
                    <h2>Async / Await: O "Doce" Sint√°tico</h2>

                    <div class="learning-objectives">
                        <h3>O que vais aprender nesta aula:</h3>
                        <ul>
                            <li>Transformar Promises em c√≥digo de aspeto s√≠ncrono</li>
                            <li>Palavras-chave: <code>async</code> e <code>await</code></li>
                            <li>Tratamento de erros com <code>try...catch</code></li>
                        </ul>
                    </div>
                </div>

                <div class="section">
                    <h2>üß† Teoria (com Analogia e Contexto Real)</h2>

                    <p>Antigamente, us√°vamos <code>.then()</code>. Funciona, mas pode ficar confuso. O <code>async/await</code> (lan√ßado em 2017) √© uma forma mais limpa de ler Promises.</p>

                    <div class="analogy-box">
                        <h4>‚èØÔ∏è Analogia do Bot√£o de Pausa</h4>
                        <p>O <code>await</code> √© como meter o comando "pausa" num videojogo.</p>
                        <p>A fun√ß√£o p√°ra PONTUALMENTE naquela linha, √† espera que a promessa termine, e depois continua.</p>
                        <p>Importante: S√≥ a fun√ß√£o p√°ra, o resto do site continua a funcionar!</p>
                    </div>
                </div>

                <div class="section">
                    <h2>üíª Pr√°tica (Antes e Depois)</h2>

                    <div class="code-comparison">
                        <div class="code-block">
                            <div class="code-title">Promessas (Antigo)</div>
                            <pre><code>function buscarDados() {
  fetch("url")
    .then(res => res.json())
    .then(data => {
      console.log(data);
    })
    .catch(erro => {
      console.error(erro);
    });
}</code></pre>
                        </div>
                        <div class="code-block" style="border: 1px solid #4CAF50;">
                            <div class="code-title">Async/Await (Moderno)</div>
                            <pre><code>async function buscarDados() {
  try {
    const res = await fetch("url");
    const data = await res.json();
    console.log(data);
  } catch (erro) {
    console.error(erro);
  }
}</code></pre>
                        </div>
                    </div>

                    <div class="demo-area">
                        <h3>‚ö° Mini-App: Pok√©dex R√°pida</h3>
                        <p>Procura um Pok√©mon pelo nome ou ID (ex: "pikachu", "ditto", "25").</p>

                        <div class="search-box">
                            <input type="text" id="poke-input" placeholder="Nome ou ID...">
                            <button id="btn-buscar">Buscar</button>
                        </div>

                        <div id="pokedex">
                            <!-- Resultado aqui -->
                        </div>

                        <script>
                            const btn = document.querySelector("#btn-buscar");
                            const input = document.querySelector("#poke-input");
                            const pokedex = document.querySelector("#pokedex");

                            // Fun√ß√£o Ass√≠ncrona
                            async function buscarPokemon(query) {
                                if (!query) return;

                                pokedex.innerHTML = '<p>‚è≥ A carregar...</p>';

                                try {
                                    // 1. Pausa aqui at√© o fetch responder
                                    const resposta = await fetch(`https://pokeapi.co/api/v2/pokemon/${query.toLowerCase()}`);

                                    if (!resposta.ok) {
                                        throw new Error("Pok√©mon n√£o encontrado!");
                                    }

                                    // 2. Pausa aqui at√© converter o JSON
                                    const dados = await resposta.json();

                                    // 3. Mostrar (c√≥digo normal s√≠ncrono)
                                    mostrarPokemon(dados);

                                } catch (erro) {
                                    pokedex.innerHTML = `<p style="color: salmon">‚ùå ${erro.message}</p>`;
                                }
                            }

                            function mostrarPokemon(p) {
                                pokedex.innerHTML = `
                                    <div class="pokemon-card">
                                        <img src="${p.sprites.front_default}" alt="${p.name}">
                                        <h4>${p.name}</h4>
                                        <p>Tipo: ${p.types[0].type.name}</p>
                                    </div>
                                `;
                            }

                            btn.addEventListener("click", () => {
                                buscarPokemon(input.value);
                            });

                            // Permitir Enter
                            input.addEventListener("keypress", (e) => {
                                if (e.key === "Enter") buscarPokemon(input.value);
                            });
                        </script>
                    </div>
                </div>

                <div class="section">
                    <div class="verification">
                        <h2>‚úÖ Verifica√ß√£o de Conhecimento</h2>

                        <div class="question" data-question="1">
                            <h3>1. A palavra `await` pode ser usada em qualquer fun√ß√£o?</h3>
                            <div class="options">
                                <div class="option" data-value="a">Sim, em qualquer s√≠tio.</div>
                                <div class="option" data-value="b">N√£o, apenas dentro de fun√ß√µes marcadas com `async`.</div>
                                <div class="option" data-value="c">Apenas dentro de loops.</div>
                            </div>
                            <div class="feedback">
                                <div class="explanation"></div>
                                <div class="analogy-feedback"></div>
                            </div>
                        </div>

                        <div class="question" data-question="2">
                            <h3>2. Como apanho erros no async/await?</h3>
                            <div class="options">
                                <div class="option" data-value="a">Usando `.catch()` no final da fun√ß√£o.</div>
                                <div class="option" data-value="b">O async/await n√£o permite apanhar erros.</div>
                                <div class="option" data-value="c">Envolvendo o c√≥digo num bloco `try { ... } catch (erro) { ... }`.</div>
                            </div>
                            <div class="feedback">
                                <div class="explanation"></div>
                                <div class="analogy-feedback"></div>
                            </div>
                        </div>

                        <button class="submit-btn" id="submitBtn" disabled>Verificar Respostas</button>

                        <div class="results" id="results">
                            <h3 id="resultsText"></h3>
                            <p id="resultsScore"></p>
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="lesson-navigation">
                    <a href="../aula-23-fetch-api/index.html" class="nav-btn prev">
                        <span class="arrow">‚Üê</span> Aula Anterior
                    </a>
                    <a href="../index.html" class="nav-btn home">
                        <span class="arrow">üè†</span>
                    </a>
                    <a href="../aula-25-es6-intro/index.html" class="nav-btn next">
                        Aula 25: ES6+ Moderno <span class="arrow">‚Üí</span>
                    </a>
                </div>

            </div>

            <div class="sidebar">
                <h3>Informa√ß√µes da Aula</h3>

                <div class="lesson-info">
                    <div class="info-item">
                        <span>Aula:</span>
                        <strong>24</strong> <span style="font-size: 0.8em; opacity: 0.7">(M√≥d. 6)</span>
                    </div>
                    <div class="info-item">
                        <span>Dura√ß√£o:</span>
                        <strong>50 minutos</strong>
                    </div>
                    <div class="info-item">
                        <span>Dificuldade:</span>
                        <strong>F√°cil</strong> (Se souberes Promises)
                    </div>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" style="width: 100%;"></div>
                </div>

                <div class="career-tip">
                    <h4>üíº Dica de Carreira</h4>
                    <p>Hoje em dia, 99% do c√≥digo ass√≠ncrono profissional usa <code>async/await</code>. √â mais leg√≠vel, mais f√°cil de depurar e parece c√≥digo sequencial.</p>
                </div>

                <div class="next-lesson">
                    <h4>üéâ Completaste o M√≥dulo 6!</h4>
                    <p>Sabes comunicar com servidores!</p>
                    <p>Pr√≥ximo passo: <strong>Consolida√ß√£o com Projetos</strong>.</p>
                </div>
            </div>
        </div>
    </div>

    <footer class="container">
        <p>Curso Completo de JavaScript - 2026 | Forma√ß√£o em Portugu√™s Europeu</p>
    </footer>

    <script>
        window.courseData = {
            questions: {
                1: {
                    correct: 'b',
                    explanation: 'A palavra-chave <code>await</code> s√≥ √© permitida dentro de fun√ß√µes <code>async</code>. Se tentares usar fora, o c√≥digo d√° erro.',
                    analogy: 'S√≥ podes usar o "Pausa" se estiveres a "Jogar" (Async).'
                },
                2: {
                    correct: 'c',
                    explanation: 'Como o c√≥digo parece s√≠ncrono, usamos a estrutura cl√°ssica de tratamento de erros do JavaScript: <code>try...catch</code>.',
                    analogy: 'Tenta (try) fazer isto. Se der para o torto, agarra (catch) o problema.'
                }
            }
        };
    </script>
    <script src="../assets/js/app.js"></script>
</body>
</html>
